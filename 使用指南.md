# 📺 电视剧AI剪辑系统 - 使用指南

## 🎯 项目简介

这是一个基于AI的电视剧智能剪辑系统，可以自动分析电视剧字幕，识别精彩片段，并自动剪辑生成短视频。

## ✨ 核心特性

- ✅ **100% AI驱动** - 完全由AI分析剧情，识别精彩片段
- ✅ **智能缓存** - AI分析结果自动缓存，避免重复调用
- ✅ **断点续传** - 已剪辑的视频自动跳过
- ✅ **旁白生成** - 自动生成专业旁白解说
- ✅ **多次一致** - 相同字幕多次执行结果一致
- ✅ **简单易用** - 命令行和Web界面双模式

## 📁 项目结构

```
clip-main/
├── main.py                    # 主程序（命令行模式）
├── web_app.py                 # Web管理界面
├── config_manager.py          # 配置管理模块
├── tv_series_system.py        # 电视剧剪辑系统
├── tv_ai_analyzer.py          # AI分析模块
├── tv_video_clipper.py        # 视频剪辑模块
├── tv_subtitle_generator.py   # 字幕生成模块
├── api_config_helper.py       # API配置助手
├── srt/                       # 字幕文件目录
├── videos/                    # 视频文件目录
├── tv_clips/                  # 输出视频目录
└── tv_cache/                  # 缓存目录
```

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install openai google-generativeai flask
```

### 2. 准备文件

将字幕文件放入 `srt/` 目录，视频文件放入 `videos/` 目录。

### 3. 运行程序

**命令行模式：**
```bash
python main.py
```

**Web界面模式：**
```bash
python web_app.py
```
然后访问 http://localhost:5000

## 📖 详细使用说明

### 配置AI接口

首次使用需要配置AI接口：

1. 选择 `1. 🤖 配置AI接口`
2. 选择API类型（官方API或中转API）
3. 输入API密钥和模型信息
4. 测试连接

### 开始剪辑

1. 确保字幕和视频文件已放入对应目录
2. 选择 `2. 🎬 开始智能剪辑`
3. 系统会自动处理所有集数
4. 剪辑完成的视频保存在 `tv_clips/` 目录

## 💡 使用技巧

- **缓存机制**：AI分析结果会自动缓存，相同字幕不会重复分析
- **断点续传**：已剪辑的视频会自动跳过，可随时中断继续
- **文件命名**：字幕和视频文件名要相似，系统会自动匹配

## 🔧 配置说明

配置文件保存在 `.config.json`，包含：
- AI配置（API密钥、模型等）
- 路径配置（各目录路径）
- 处理配置（片段数量、时长等）

## ❓ 常见问题

**Q: AI分析失败怎么办？**
A: 检查API配置和网络连接，确保API密钥有效。

**Q: 找不到视频文件？**
A: 确保视频文件名与字幕文件名相似。

**Q: 如何重新分析？**
A: 删除 `tv_cache/` 目录中对应的缓存文件。

## 📞 技术支持

如有问题，请检查：
1. Python版本 >= 3.7
2. FFmpeg已安装
3. API配置正确
4. 网络连接正常
